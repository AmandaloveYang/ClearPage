(()=>{"use strict";chrome.runtime.onInstalled.addListener((()=>{console.log("Cache Clearer 插件已安装")})),chrome.runtime.onMessage.addListener(((e,s,o)=>{if("CLEAR_CACHE"===e.type){const{domain:s,dataTypes:c,since:r}=e.payload,i={since:r||0,origins:s?[`https://${s}`,`http://${s}`]:void 0},n={cache:c.includes("cache"),cookies:c.includes("cookies"),downloads:c.includes("downloads"),fileSystems:c.includes("fileSystems"),formData:c.includes("formData"),history:c.includes("history"),indexedDB:c.includes("indexedDB"),localStorage:c.includes("localStorage"),passwords:c.includes("passwords"),serviceWorkers:c.includes("serviceWorkers"),webSQL:c.includes("webSQL")};return chrome.browsingData.remove(i,n).then((()=>{console.log("缓存清理成功"),o({success:!0})})).catch((e=>{console.error("缓存清理失败:",e),o({success:!1,error:e.message})})),!0}}))})();